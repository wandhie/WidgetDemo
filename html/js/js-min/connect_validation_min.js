var DAY_SUFFIX=".DAY";var MONTH_SUFFIX=".MONTH";var YEAR_SUFFIX=".YEAR";var HOURS_SUFFIX=".HOUROFDAY";var MINUTES_SUFFIX=".MINUTES";var SECONDS_SUFFIX=".SECONDS";var DATE_SUFFIX=".DATE";var TIME_SUFFIX=".TIME";function validateRegularExpression(e,i,a,h,l,g,b,k){var f=true;if(hasChanged(g,e)){if(!this["beforeValidation"]||this["beforeValidation"](e,getMsg(g,"ValidationMessage"),null,null,a,h,l,null,null,g,null,null,k)){if(!this["beforeValidateRegularExpression"]||beforeValidateRegularExpression(e,i,a,h,l,g,k)){if(e.value==null||e.value.length==0){if(b){hideErrorMessage(g,e,k)}updateStyles(g,e,k,"remove");return true}if(i!=""){var d=new RegExp(i);if(!d.test(e.value)){if(l[0]!=null&&l[0].length>0){alertComp(e,l[0],g,b,k)}else{alertComp(e,getMsg(g,"ValidationMessage"),g,b,k)}f=false}}if(f){if(b){hideErrorMessage(g,e,k)}updateStyles(g,e,k,"remove")}f=f?checkRange(e,trim(e.value).length,"Length",a,h,l,g,b,null,k):f}}if(this["afterValidateRegularExpression"]){f=afterValidateRegularExpression(e,i,a,h,l,g,f,k)}if(this["afterValidation"]){f=afterValidation(e,getMsg(g,"ValidationMessage"),null,null,a,h,l,null,null,g,null,null,f,k)}if(!f){if(g==null){g=""}var j=getVariable(g,"invalidQuestions");if(j==null){j=new Array()}j[e.id]=e;setVariable(g,"invalidQuestions",j)}else{if(g==null){g=""}var j=getVariable(g,"invalidQuestions");if(j!=null){delete j[e.id]}}}return f}function validFile(e,m,c,k,o,j,g,n){var h=false;var a=e.value;if(!this["beforeValidation"]||this["beforeValidation"](e,getMsg(j,"InvalidUploadTypeMessage"),null,null,c,k,o,m,null,j,null,null,n)){if(!this["beforeValidFile"]||beforeValidFile(e,m,o,j)){if(a==null||a.length==0){enableSubmit(j,true);h=true}if(g){hideErrorMessage(j,e,n)}if(!h){var f="";var l=false;if(m!=null&&m.length>0&&!validateFileExtension(e,m)){var b="";for(var d=0;d<m.length;d++){b+=m[d]+" "}if(l){f=+"&nbsp;&nbsp;"}f+=getMsg(j,"InvalidUploadTypeMessage","QUESTION_CONSTRAINT="+b);l=true}if(k!=null&&k.length>0&&!validateFileSize(e,k)){if(l){f+="&nbsp;&nbsp;"}f+=getMsg(j,"InvalidMaxFileSizeMessage","QUESTION_CONSTRAINT="+k);l=true}if(l){if(o[0]!=null&&o[0].length>0){alertComp(e,o[0],j,g)}else{alertComp(e,f,j,g)}if(j==null){j=""}enableSubmit(j,false);h=false}else{if(j==null){j=""}enableSubmit(j,true);h=true}}}}if(this["afterValidFile"]){h=afterValidFile(e,m,o,j,h)}if(this["afterValidation"]){h=afterValidation(e,getMsg(j,"InvalidUploadTypeMessage"),null,null,c,k,o,m,null,j,null,null,h,n)}return h}function validateFileExtension(a,c){found=false;if(c==null){found=true}else{for(var b=0;b<c.length;b++){if((a.value.substr(a.value.lastIndexOf(".")+1,a.value.length).toLowerCase())==c[b].toLowerCase()){found=true}}}return found}function validateFileSize(b,a){if(window.FileReader){if(b.files&&b.files[0]){var c=b.files[0];if(c.size>(a*1024)){return false}}}return true}function validAlphaNumeric(b,c,a,f,d,g,e){return checkWithHook("ValidAlphaNumeric",b,"AN",getMsg(d,"InvalidAlphaNumericMessage"),null,null,c,a,f,null,null,d,g,null,null,e)}function validAlpha(b,c,a,f,d,g,e){return checkWithHook("ValidAlpha",b,"A",getMsg(d,"InvalidAlphaMessage"),null,null,c,a,f,null,null,d,g,null,null,e)}function validAllChars(b,c,a,f,d,g,e){return checkWithHook("ValidAllChars",b,"AC","",null,null,c,a,f,null,null,d,g,null,null,e)}function validNumeric(d,a,g,i,j,f,e,h){var c=checkWithHook("ValidNumeric",d,"N",getMsg(f,"InvalidNumMessage"),i,null,a,g,j,null,null,f,e,null,null,h);var b=d.value;if(c&&i&&i.length>0){b=removeNumberFormating(d.value,i,true);if(b!=null&&b.length>0){if(b.charAt(0)=="-"){b="-"+b.substr(1).replace(/^0+(?!$)/,"")}else{b=b.replace(/^0+(?!$)/,"")}d.value=addNumberFormating(b,i)}}return c}function validDouble(d,a,g,i,j,f,e,h){var c=checkWithHook("ValidDouble",d,"D",getMsg(f,"InvalidDecimalMessage"),i,null,a,g,j,null,null,f,e,null,null,h);var b=d.value;if(c&&i&&i.length>0){b=removeNumberFormating(d.value,i,true);if(b!=null&&b.length>0){if(b.charAt(0)=="-"){b="-"+b.substr(1).replace(/^0+(?!\.|$)/,"")}else{b=b.replace(/^0+(?!\.|$)/,"")}d.value=addNumberFormating(b,i)}}return c}function validDateTime(i,a,e,h,f,b,d,c,g){if(f==null){f=new Array("dd/mm/yyyy","hh:mm:ss")}if(b==null){b=new Array("/",":"," ")}return checkWithHook("ValidDateTime",i,"VDT",getMsg(d,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(f[0]+b[2]+f[1])),null,null,a,e,h,f,b,d,c,null,null,g)}function validDateWeekTime(i,a,e,h,f,b,d,c,g){if(f==null){f=new Array("ww/yyyy","hh:mm:ss")}if(b==null){b=new Array("/",":"," ")}return checkWithHook("ValidDateWeekTime",i,"VDWT",getMsg(d,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(f[0]+b[2]+f[1])),null,null,a,e,h,f,b,d,c,null,null,g)}function validDateWeek(i,a,e,h,f,b,d,c,g){if(f==null){f="ww/yyyy"}if(b==null){b="/"}return checkWithHook("ValidDateWeek",i,"VDW",getMsg(d,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(f)),null,null,a,e,h,f,b,d,c,null,null,g)}function validDate(i,a,e,h,f,b,d,c,g){if(f==null){f="dd/mm/yyyy"}if(b==null){b="/"}return checkWithHook("ValidDate",i,"VD",getMsg(d,"InvalidDateMessage","QUESTION_CONSTRAINT="+unescape(f)),null,null,a,e,h,f,b,d,c,null,null,g)}function validTime(i,a,e,h,f,b,d,c,g){return checkWithHook("ValidTime",i,"VT",getMsg(d,"InvalidTimeMessage","QUESTION_CONSTRAINT="+f),null,null,a,e,h,f,b,d,c,null,null,g)}function validDayDatePart(b,c,g,d,k,a,e,n,l,f,j,i,m){var h=checkWithHook("ValidDayDatePart",b,"VDP",getMsg(j,"InvalidDateMessage","QUESTION_CONSTRAINT="+l),c,g,d,k,n,l,f,j,i,a,e,m);return validateOtherSplitParts(h,b.id)}function validMonthDatePart(g,e,f,b,k,a,c,n,l,d,j,i,m){var h=checkWithHook("ValidMonthDatePart",g,"VMP",getMsg(j,"InvalidDateMessage","QUESTION_CONSTRAINT="+l),e,f,b,k,n,l,d,j,i,a,c,m);return validateOtherSplitParts(h,g.id)}function validYearDatePart(m,b,f,c,j,a,d,n,k,e,i,h,l){var g=checkWithHook("ValidYearDatePart",m,"VYP",getMsg(i,"InvalidDateMessage","QUESTION_CONSTRAINT="+k),f,b,c,j,n,k,e,i,h,a,d,l);return validateOtherSplitParts(g,m.id)}function validHourTimePart(a,g,c,d,k,b,e,n,l,f,j,i,m){var h=checkWithHook("ValidHourTimePart",a,"VHT",getMsg(j,"InvalidTimeMessage","QUESTION_CONSTRAINT="+l),g,c,d,k,n,l,f,j,i,null,null,m);return validateOtherSplitParts(h,a.id)}function validMinuteTimePart(a,g,c,d,k,b,e,n,l,f,j,i,m){var h=checkWithHook("ValidMinuteTimePart",a,"VMT",getMsg(j,"InvalidTimeMessage","QUESTION_CONSTRAINT="+l),g,c,d,k,n,l,f,j,i,null,null,m);return validateOtherSplitParts(h,a.id)}function validSecondTimePart(b,g,f,c,k,a,d,n,l,e,j,i,m){var h=checkWithHook("ValidSecondTimePart",b,"VST",getMsg(j,"InvalidTimeMessage","QUESTION_CONSTRAINT="+l),g,f,c,k,n,l,e,j,i,null,null,m);return validateOtherSplitParts(h,b.id)}function validWeekDatePart(b,f,c,j,a,d,m,k,e,i,h,l){var g=checkWithHook("ValidWeekDatePart",b,"VWP",getMsg(i,"InvalidDateMessage","QUESTION_CONSTRAINT="+k),"",f,c,j,m,k,e,i,h,a,d,l);return g}function validateOtherSplitParts(c,b){if(!c||getTriggeredReason()==FORMAT_VALIDATION_TRIGGER){return c}var a=b.substring(b.lastIndexOf("."));c=true;var d=b.substring(0,b.lastIndexOf("."));c=validPart(d,c,".DAY",a);c=validPart(d,c,".MONTH",a);c=validPart(d,c,".YEAR",a);c=validPart(d,c,".HOUROFDAY",a);c=validPart(d,c,".MINUTES",a);c=validPart(d,c,".SECONDS",a);return c}function validPart(b,e,c,a){var f=document.getElementById(b+c);if(e&&f&&a!=c){if(f.onchange){e=execute(f,"onchange",FORMAT_VALIDATION_TRIGGER)}else{e=execute(f,"onblur",FORMAT_VALIDATION_TRIGGER)}}return e}function checkWithHook(e,q,i,j,u,r,k,n,f,o,b,s,a,l,p,d){var h=true;if(!this["beforeValidation"]||this["beforeValidation"](q,j,u,r,k,n,f,o,b,s,l,p)){if(!this["before"+e]||this["before"+e](q,j,u,r,k,n,f,o,b,s,l,p)){h=checkA(q,i,j,u,r,k,n,f,o,b,s,a,l,p,d)}}if(this["after"+e]){h=this["after"+e](q,j,u,r,k,n,f,o,b,s,l,p,h)}if(this["afterValidation"]){h=this["afterValidation"](q,j,u,r,k,n,f,o,b,s,l,p,h)}if(!h){if(s==null){s=""}var g=getVariable(s,"invalidQuestions");if(g==null){g=new Array()}g[q.id]=q;setVariable(s,"invalidQuestions",g)}else{if(s==null){s=""}var g=getVariable(s,"invalidQuestions");if(g!=null){delete g[q.id]}}return h}function checkA(x,l,o,C,A,p,s,h,u,e,B,d,r,w,f){var j=true;var y=getElementValue(x,B);if(y==null||y==""){if(x.validity&&!x.validity.valid){j=false}else{var q=isFieldInMandError(B,x.id);if(!q){if(d){hideErrorMessage(B,x,f)}updateStyles(B,x,f,"remove")}return true}}if(j){var b=null;if(l=="N"||l=="D"){if(C&&C.length>0){y=removeNumberFormating(y,C,false)}}if(l=="A"){j=isAlpha(y)}else{if(l=="AN"){j=isAlphanumeric(y)}else{if(l=="AC"){j=true}else{if(l=="N"){j=isClientInteger(y)}else{if(l=="D"){var k=".";if(C&&C.length>0){k=""+C.charAt(0)}j=isClientDouble(y,k)}else{if(l=="VDP"){j=isDay(y)}else{if(l=="VMP"){j=isMonth(y)}else{if(l=="VWP"){j=isWeek(y)}else{if(l=="VYP"){j=isYear(y)}else{if(l=="VHT"){j=isHour(y)}else{if(l=="VMT"){j=isMinute(y)}else{if(l=="VST"){j=isSecond(y)}else{if(l=="VT"){j=isTime(y,u,e)}else{if(l=="VD"){var i=nDate(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDT"){var i=nDateTime(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDWT"){var i=nDateWeekTime(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}else{if(l=="VDW"){var i=nDateWeek(y,u,e,B);if(i!=null){x.value=i;j=true}else{j=false}}}}}}}}}}}}}}}}}}}if(!j){var n=0;if(l=="VHT"||l=="VMT"||l=="VST"||l=="VT"){n=5}var a=(h[n]&&h[n].length>0)?getMsg("@GOT_MSG@",h[n],"QUESTION_CONSTRAINT="+u):o;return alertComp(x,a,B,d,f)}else{if(getForm(B)){b=getForm(B).elements}if(d){hideErrorMessage(B,x,f)}updateStyles(B,x,f,"remove");if(l.charAt(0)=="A"){return checkRange(x,y.length,"Length",p,s,h,B,d,null,f)}else{if(l=="N"){if(p.indexOf("+")==0){p=p.substring(1)}if(s.indexOf("+")==0){s=s.substring(1)}return checkRange(x,mpi(y),"Value",p,s,h,B,d,C,f)}else{if(l=="D"){if(p.indexOf("+")==0){p=p.substring(1)}if(s.indexOf("+")==0){s=s.substring(1)}if(C&&C.length>0){y=removeNumberFormating(y,C,true)}return checkRange(x,mpd(y),"Value",p,s,h,B,d,C,f)}else{if(l=="VDP"){return validDateParts(x,x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],b[x.name.substring(0,x.name.lastIndexOf("."))+A],p,s,r,w,u,e,B,d,h,f)}else{if(l=="VMP"){return validDateParts(x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],x,b[x.name.substring(0,x.name.lastIndexOf("."))+A],p,s,r,w,u,e,B,d,h,f)}else{if(l=="VYP"){return validDateParts(x,b[x.name.substring(0,x.name.lastIndexOf("."))+C],b[x.name.substring(0,x.name.lastIndexOf("."))+A],x,p,s,r,w,u,e,B,d,h,f)}else{if(l=="VD"||l=="VDT"){var g=x.value;if(l=="VDT"){var z=g.indexOf(e[2]);if(z>-1){g=g.substring(0,z)}u=u[0];e=e[0]}if(!checkMinDate(x,g,p,u,e,B,d,r,h,f)){return false}if(!checkMaxDate(x,g,s,u,e,B,d,w,h,f)){return false}return true}else{if(l=="VDW"||l=="VDWT"){var g=x.value;if(l=="VDWT"){var z=g.indexOf(e[2]);if(z>-1){g=g.substring(0,z)}u=u[0];e=e[0]}if(!checkMinDateWeek(x,g,p,u,e,B,d,r,h,f)){return false}if(!checkMaxDateWeek(x,g,s,u,e,B,d,w,h,f)){return false}return true}}}}}}}}}return true}function trim(a){return a.replace(/^\s+|\s+$/g,"")}function isAlpha(d){var a;d=d.toUpperCase();for(var b=0;b<d.length;b++){a=d.charAt(b);if(!isLetter(a)&&!isSpecial(a)){return false}}return true}function isAlphanumeric(d){var a;d=d.toUpperCase();for(var b=0;b<d.length;b++){a=d.charAt(b);if(!isDigit(a)&&!isLetter(a)&&!isSpecial(a)){return false}}return true}function isLegalExpresion(e,d){var b=e.value;if(b!=null&&b.length!=0){var a=new RegExp("\\$(%|\\$).*[a-zA-Z0-9_-].*\\$");if(a.test(e.value)){alertComp(e,getMsg("","ValidationMessage"),"",true,d);return false}}return true}function isClientInteger(b,a){return isInt(b,a)}function isInteger(a){return isInt(a,".,")}function isInt(c,a){if(c.length==0){return true}var d;if(a&&a.length>1){d=a.charAt(1)}for(var b=0;b<c.length;b++){if(b==0&&(c.charAt(b)=="-"||c.charAt(b)=="+")){if(c.length==1){return false}continue}if(!isDigit(c.charAt(b))){if(!(d&&d!=""&&(c.charAt(b)==d))){return false}}}return true}function isClientDouble(b,a){return isDbl(b,a)}function isDouble(a){return isDbl(a,".,")}function isDbl(b,a){b=removeNumberFormating(b,a,true);return !isNaN(parseFloat(b))&&isFinite(b)}function isDigit(a){return((a>="0")&&(a<="9"))}function isLetter(a){return((a>="A")&&(a<="Z"))}function isSpecial(a){return(a==" "||a=="'")}function isTime(f,e,d){var c=splitstring(f,d,false,true);var b=splitstring(e,d,false,true);for(var a=0;a<b.length;a++){if(c[a]==""||isNaN(c[a])||parseInt(c[a])<0){return false}if(b[a]=="hh"){if(parseInt(c[a])>23){return false}}else{if(parseInt(c[a])>59){return false}}}return true}function addNumberFormating(h,c){var g=c.charAt(0);var a=c.charAt(1);var f=new Array();var e=h+"";if(e.length>0&&e.charAt(0)=="."){e="0"+e}f=splitstring(e,".",false,true);var d=c.charAt(1)=="Y";if(d){a=c.charAt(2);if(a&&a!=""){var b=new RegExp("(-?\\d+)(\\d{3})");while(b.test(f[0])){f[0]=f[0].replace(b,"$1"+a+"$2")}}}if(f[1]){return f[0]+g+f[1]}else{return f[0]}}function removeNumberFormating(l,n,j){if(l&&l!=""){var m=l;var e;var g=n.charAt(0);if(g&&g!=""){if(m.charAt(0)==g){m="0"+m}e=splitstring(m,g,false,true);if(e.length==1||e.length==2){m=e[0]}}var d=n.charAt(1)=="Y";if(d){var b=n.charAt(2);if(b&&b!=""){var h=n.charAt(3)=="Y";if(h){var c=0;if(m.charAt(0)=="-"){c=1}for(var f=m.length-4;f>c;f-=4){var a=m.charAt(f);if(a!=b&&!isDigit(a)){return l}else{if(a==b){m=m.substring(0,f)+m.substring(f+1)}else{f++}}}}else{var k=new RegExp(b,"g");if("[^$.|?*+()".indexOf(b)!=-1){k=new RegExp("\\"+b,"g")}m=m.replace(k,"")}}}l=m;if(g&&g!=""&&e.length==2){if(j){l=l+"."+e[1]}else{l=l+g+e[1]}}}return l}function checkRange(c,a,g,b,f,j,e,d,i,h){if(!checkMin(c,a,b,g,j,e,d,i,h)){return false}if(!checkMax(c,a,f,g,j,e,d,i,h)){return false}return true}function checkMax(b,a,g,h,k,f,e,j,i){if(g==""){return true}var d=""+a;var c=""+g;if(isInteger(d)&&isInteger(c)){d=mpi(d);c=mpi(c)}else{if(isDouble(d)&&isDouble(c)){d=mpd(d);c=mpd(c)}}if(d>c){if(k[2].length>0){alertComp(b,k[2],f,e,i)}else{if(j&&j.length>0){c=addNumberFormating(c,j)}alertComp(b,getMsg(f,"InvalidMax"+h+"Message","QUESTION_CONSTRAINT="+c),f,e,i)}return false}return true}function checkMin(c,a,b,h,k,g,f,j,i){if(b==""){return true}var e=""+a;var d=""+b;if(isInteger(e)&&isInteger(d)){e=mpi(e);d=mpi(d)}else{if(isDouble(e)&&isDouble(d)){e=mpd(e);d=mpd(d)}}if(e<d){if(k[1].length>0){alertComp(c,k[1],g,f,i)}else{if(j&&j.length>0){d=addNumberFormating(d,j)}alertComp(c,getMsg(g,"InvalidMin"+h+"Message","QUESTION_CONSTRAINT="+d),g,f,i)}return false}return true}function mpi(b,a){if(b==null&&a!=null){b=""+a}else{b=""+b}while(b!=null&&(b.charAt(0)=="0")&&(b.length>1)){b=b.substring(1)}return parseInt(b,10)}function mpd(a){a=""+a;while((a.charAt(0)=="0")&&(a.length>1)){a=a.substring(1)}return parseFloat(a)}function validDateParts(h,u,b,c,m,p,o,r,q,e,x,d,g,f){if((u!=null&&u.value=="")||(b!=null&&b.value=="")||(c!=null&&c.value=="")){return true}var k=(c==null?getCurrentYear(x):parseInt(c.value,10));var n=(b==null?1:mpi(b.value,1));var a=(u==null?1:mpi(u.value,1));if(a>daysInMonth[n]){return alertComp(u,(g[3]&&g[3].length>0)?g[3]:getMsg(x,"InvalidDaysInMonthMessage"),x,d,f)}else{if((n==2)&&(a>daysInFebruary(k))){return alertComp(c,(g[4]&&g[4].length>0)?g[4]:getMsg(x,"InvalidLeapYearMessage"),x,d,f)}}if(m==""&&p==""){return(true)}var i=a+"/"+n+"/"+k;var t="dd/mm/yyyy";var s="/";var v=splitstring(m,"/",false);var w=splitstring(p,"/",false);if(q.indexOf("dd")<0){v[0]="1";w[0]="1"}if(q.indexOf("mm")<0){v[1]="1";w[1]="1"}if(q.indexOf("yyyy")<0){v[2]=getCurrentYear(x);w[2]=getCurrentYear(x)}var j=v[0]+"/"+v[1]+"/"+v[2];var l=w[0]+"/"+w[1]+"/"+w[2];if(m!=""&&!checkMinDate(h,i,j,t,s,x,d,o,g,f)){return false}if(p!=""&&!checkMaxDate(h,i,l,t,s,x,d,r,g,f)){return false}return true}function getCurrentYear(a){return(getVariable(a,"CURRENT_YEAR"))}function nDateTime(e,g,f,d){if((e==null)||(e=="")){return null}var b=e.indexOf(f[2]);if(b>-1){var a=e.substring(0,b);var c=e.substring(b+1);a=nDate(a,g[0],f[0],d);if(a==null){return null}if(!isTime(c,g[1],f[1])){return null}return a+f[2]+c}else{return nDate(e,g[0],f[0],d)}}function nDateWeekTime(e,g,f,d){if((e==null)||(e=="")){return null}var b=e.indexOf(f[2]);if(b>-1){var a=e.substring(0,b);var c=e.substring(b+1);a=nDateWeek(a,g[0],f[0],d);if(a==null){return null}if(!isTime(c,g[1],f[1])){return null}return a+f[2]+c}else{return nDateWeek(e,g[0],f[0],d)}}function nDate(d,g,f,b){if((d==null)||(d=="")){return null}var e=splitstring(stripTrailingChars(d,f),f,false,true);var a=splitstring(stripTrailingChars(g,f),f,false);if(e.length!=a.length){return null}this.dd="1";this.mm="1";this.yy=getCurrentYear(b);var c=null;if(a.length>0){if(a[0]=="dd"){if(isNaN(e[0])){return null}else{this.dd=mpi(e[0])}}else{if(a[0]=="mm"){if(isNaN(e[0])){return null}else{this.mm=mpi(e[0])}}else{if(a[0]=="yyyy"){if(isNaN(e[0])){return null}else{this.yy=mpi(e[0])}}}}c="";if(e[0].length==1){c="0"}c+=e[0]}if(a.length>1){if(a[1]=="dd"){if(isNaN(e[1])){return null}else{this.dd=mpi(e[1])}}else{if(a[1]=="mm"){if(isNaN(e[1])){return null}else{this.mm=mpi(e[1])}}else{if(a[1]=="yyyy"){if(isNaN(e[1])){return null}else{this.yy=mpi(e[1])}}}}c+=f;if(e[1].length==1){c+="0"}c+=e[1]}if(a.length>2){if(a[2]=="dd"){if(isNaN(e[2])){return null}else{this.dd=mpi(e[2])}}else{if(a[2]=="mm"){if(isNaN(e[2])){return null}else{this.mm=mpi(e[2])}}else{if(a[2]=="yyyy"){if(isNaN(e[2])){return null}else{this.yy=mpi(e[2])}}}}c+=f;if(a[2].length==1){c+="0"}c+=e[2]}if(isDate(""+this.yy,""+this.mm,""+this.dd)){return c}else{return null}}function nDateWeek(d,g,f,b){if((d==null)||(d=="")){return null}var e=splitstring(stripTrailingChars(d,f),f,false,true);var a=splitstring(stripTrailingChars(g,f),f,false);if(e.length!=a.length){return null}this.ww=1;this.yy=getCurrentYear(b);var c=null;if(a.length>0){if(a[0]=="ww"){if(isNaN(e[0])){return null}else{this.ww=mpi(e[0])}}else{if(a[0]=="yyyy"){if(isNaN(e[0])){return null}else{this.yy=mpi(e[0])}}}c="";if(e[0].length==1){c="0"}c+=e[0]}if(a.length>1){if(a[1]=="ww"){if(isNaN(e[1])){return null}else{this.ww=mpi(e[1])}}else{if(a[1]=="yyyy"){if(isNaN(e[1])){return null}else{this.yy=mpi(e[1])}}}c+=f;if(e[1].length==1){c+="0"}c+=e[1]}if(isWeek(this.ww)&&isYear(""+this.yy)){return c}else{return null}}function setFocus(d){if(d){try{if(document.querySelectorAll){var c=d.id+"_editor";var a=document.querySelectorAll("."+c);if(a.length>0){d=a[0]}}if(d.type&&d.type=="text"){d.select()}d.focus();setTimeout(function(){try{d.focus()}catch(f){}},100)}catch(b){}}return false}function isDate(b,e,a){if(!(isYear(b)&&isMonth(e)&&isDay(a))){return false}var c=parseInt(b,10);var d=mpi(e);var f=mpi(a);if(f>daysInMonth[d]){return false}if((d==2)&&(f>daysInFebruary(c))){return false}return true}function checkMaxDate(e,b,h,j,m,g,f,d,l,k){var a=true;if(h==""){return a}var c=new nDate(b,j,m,g);var i=new nDate(h,j,m,g);if(c.yy>i.yy){a=false}if(c.yy==i.yy){if((c.mm>i.mm)||((c.mm==i.mm)&&(c.dd>i.dd))){a=false}}if(!a){return alertComp(e,(l[2]&&l[2].length>0)?l[2]:getMsg(g,"InvalidMaxDateMessage","QUESTION_CONSTRAINT="+((d==null)?h:d)),g,f,k)}return true}function checkMinDate(f,c,e,i,m,h,g,a,l,k){var b=true;if(e==""){return true}var d=new nDate(c,i,m,h);var j=new nDate(e,i,m,h);if(d.yy<j.yy){b=false}if(d.yy==j.yy){if((d.mm<j.mm)||((d.mm==j.mm)&&(d.dd<j.dd))){b=false}}if(!b){return alertComp(f,(l[1]&&l[1].length>0)?l[1]:getMsg(h,"InvalidMinDateMessage","QUESTION_CONSTRAINT="+((a==null)?e:a)),h,g,k)}return true}function checkMaxDateWeek(e,b,h,j,m,g,f,d,l,k){var a=true;if(h==""){return a}var c=new nDateWeek(b,j,m,g);var i=new nDateWeek(h,j,m,g);if(c.yy>i.yy){a=false}if(c.yy==i.yy){if(c.ww>i.ww){a=false}}if(!a){return alertComp(e,(l[2]&&l[2].length>0)?l[2]:getMsg(g,"InvalidMaxDateMessage","QUESTION_CONSTRAINT="+((d==null)?h:d)),g,f,k)}return true}function checkMinDateWeek(f,c,e,i,m,h,g,a,l,k){var b=true;if(e==""){return true}var d=new nDateWeek(c,i,m,h);var j=new nDateWeek(e,i,m,h);if(d.yy<j.yy){b=false}if(d.yy==j.yy){if(d.ww<j.ww){b=false}}if(!b){return alertComp(f,(l[1]&&l[1].length>0)?l[1]:getMsg(h,"InvalidMinDateMessage","QUESTION_CONSTRAINT="+((a==null)?e:a)),h,g,k)}return true}function isIntegerInRange(e,d,c){if(!isInteger(e)){return false}return intbounds(mpi(e),d,c)}function intbounds(a,b,c){return((a>=b)&&(a<=c))}function isYear(a){return((isInteger(a))&&(a.length==4))}function isWeek(a){return(isIntegerInRange(a,1,53))}function isMonth(a){return(isIntegerInRange(a,1,12))}function isDay(a){return(isIntegerInRange(a,1,31))}function isHour(a){return(isIntegerInRange(a,0,23))}function isMinute(a){return(isIntegerInRange(a,0,59))}function isSecond(a){return(isIntegerInRange(a,0,59))}function daysInFebruary(a){if(isNaN(a)){return 29}return(((a%4==0)&&((!(a%100==0))||(a%400==0)))?29:28)}function stripTrailingChars(b,c){var a=b.length-1;while(a>=0){if(c.indexOf(b.charAt(a))!=-1){b=b.substring(0,a--)}else{a=-1}}return b}function alertMandMessage(d,b,c){var a=getMandMessage(b,d);if(a=="Mandatory"){a=getMsg(b,"MandMessage","QUESTION_CONSTRAINT="+getVariable(b,"MANDCHAR"))}else{a=substituteVariable(a,"QUESTION_CONSTRAINT="+getVariable(b,"MANDCHAR"))}ok=alertComp(d,a,b,c)}function getTListContainerDiv(a){return getParentNode(a.parentNode,"DIV")}function showErrorMessage(e,c,a,g){var d=getErrorMessageId(e,c);var h=document.getElementById(d);if(h){jscss("remove",h,"qlrError");h.innerHTML=a;showElem(h,true)}var b=getErrorMessageRowId(e,c);var f=document.getElementById(b);if(h){showElem(f,true)}}function getMandMessageId(b,a){var d=getLookupId(b,a);var e=d[0]+"MM_"+d[1]+d[2];var c=document.getElementById(e);if(c==null){d=getLookupId(b,a,true)}return d[0]+"MM_"+d[1]+d[2]}function getMandMessage(c,b){var a="";var e=getMandMessageId(c,b);var d=document.getElementById(e);if(d!=null&&d.innerHTML!=null){a=d.innerHTML}return a}function mandCheckRow(b,g,e,i,c){if(g==null){g=""}var h=true;var a=null;var j=document.getElementById(g+b);var f=getMsg(g,"MandMessage","QUESTION_CONSTRAINT="+getVariable(g,"MANDCHAR"));if(!this["beforeMandCheckRow"]||this["beforeMandCheckRow"](j,f,g)){var d=getFormElems(g,g+b);a=checkMandFields(d,g,e,i,c)}if(a!=null){h=alertMandMessage(a,g,i);setFocus(a)}if(this["afterMandCheckRow"]){h=this["afterMandCheckRow"](j,f,g,h)}return h}function mandCheckElems(d,h,c,j,b){if(h==null){h=""}var i=true;var a=null;var f=getMsg(h,"MandMessage","QUESTION_CONSTRAINT="+getVariable(h,"MANDCHAR"));if(!this["beforeMandCheckElems"]||this["beforeMandCheckElems"](d,h,c,f)){a=checkMandFields(d,h,c,j,b)}if(a!=null){i=alertMandMessage(a,h,j);try{setFocus(a)}catch(g){}}if(this["afterMandCheckElems"]){i=this["afterMandCheckElems"](d,h,c,f,i,a)}return(i)}function isFieldInMandError(b,d){var c=getVariable(b,"MAND_ERRORS");if(c){for(var a=0;a<c.length;a++){if(c[a]==d){return true}}}return false}function arraycontains(b,d){var c=b.length;while(c--){if(b[c]===d){return true}}return false}function checkMandFields(a,w,b,o,f){setVariable(w,"MAND_ERRORS",null);var g=new Array();var l=new Array();var k=null;var c=(b)?getCompID(w,b):null;for(var q=0;q<a.length;q++){var u=a[q];if(!u.disabled&&u.type!="hidden"&&u.id.indexOf(UNSELECT_LIST_PREFIX)==-1){if(!f&&u.name!=null&&u.name==b){break}if(c!=null&&u.id!=null&&u.id.indexOf(c)!=0){continue}var y=""+getElementValue(u,w);var m=(IE4||u.type=="textarea"||u.type=="text"||u.type=="select-one"||u.type=="select-multiple")?u.style:u.parentNode.style;var x=getMandMessage(w,u);if(x.length>0){if(trim(y)==""){showMessage=true;var v=getLookupId(w,u);var h=v[0]+v[1]+v[2];if(!arraycontains(g,h)){l.push(u.id);g.push(h)}var d=extractStyleArray(u);if(d!=null){updateStyles(w,u,d,"add")}var p;if(u.onchange){p=""+u.onchange}else{if(u.type=="radio"||u.type=="checkbox"&&u.onclick){p=""+u.onclick}else{if(u.type=="radio"||u.type=="checkbox"){p=""+u.parentNode.parentNode.onclick}else{if(u.onblur){p=""+u.onblur}}}}if(p){var j=(p.lastIndexOf(" ['")>0&&p.lastIndexOf("']")>0)?p.substring(p.lastIndexOf(" ['")+2,p.lastIndexOf("']")+1):p.substring(p.lastIndexOf(' ["')+2,p.lastIndexOf('"]')+1);try{var d=j.replace(/'/g,"").replace(/"/g,"").split(",");updateStyles(w,u,d,"add")}catch(r){}}if(k==null){k=u}if(o){alertMandMessage(u,w,o)}}else{if(u.id.indexOf(SELECT_LIST_PREFIX)>-1){var n=u.id.substring(u.id.indexOf(SELECT_LIST_PREFIX)+SELECT_LIST_PREFIX.length);var t=document.getElementById(w+UNSELECT_LIST_PREFIX+n);if(t!=null){m=t.style}}setMandStyle(u,m,false)}}}}if(k==null){l=null}setVariable(w,"MAND_ERRORS",l);return k}function formatCheckElems(c,g,k){if(g==null){g=""}var j=getVariable(g,"focusValue");setVariable(g,"focusValue","");var h=true;var f=true;var d;var e=new Array();for(var b=0;b<c.length;b++){d=c[b];if(d.type!=null){if(!d.disabled&&d.type!="hidden"&&d.id.indexOf(UNSELECT_LIST_PREFIX)==-1){accumulateDateTimeElems(d,e,g);var a=true;if(d.onchange!=null&&((""+d.onchange).indexOf("ajax")<0||(""+d.onchange).indexOf("ajaxQuestionAction")>0||(""+d.onchange).indexOf("ajaxSubList")>0||(d.onblur!=null&&(""+d.onblur).indexOf("ec_suggest")>0))&&(d.type.indexOf("select")!=0||isDatePartElem(d))){a=execute(d,"onchange",FORMAT_VALIDATION_TRIGGER)}else{if(d.onblur!=null&&((""+d.onblur).indexOf("ajax")<0||(""+d.onblur).indexOf("ajaxQuestionAction")>0||(""+d.onblur).indexOf("ajaxSubList")>0)&&(d.type.indexOf("select")!=0||isDatePartElem(d))){a=execute(d,"onblur",FORMAT_VALIDATION_TRIGGER)}}if(a!=null&&a==false){h=false;setFocus(d);break}}}}f=validateDateTimeElems(e,g,k);if(this["afterFormatCheckElems"]){this["afterFormatCheckElems"](d,g,h,f)}setVariable(g,"focusValue",j);setVariable(g,"FORMAT_ERRORS",(h&&f)?null:d);return(h&&f)}function alertComp(b,a,d,h,e){if(!h){h=false}var c=false;if(d==null){d=""}if(!this["beforeMessageAlert"]||beforeMessageAlert(b,a,d)){updateStyles(d,b,e,"add");if(h){showErrorMessage(d,b,a,e)}else{alert(a)}}if(b!=null){var g=getVariable(d,"MAND_ERRORS");var f=getVariable(d,"FORMAT_ERRORS");if(g||f){showTab(b,d)}if(!h){setFocus(b)}}if(this["afterMessageAlert"]){c=afterMessageAlert(b,a,d,c)}return(c)}function isDatePartElem(a){if(a!=null){return(isDatePartFunctionName(a.name))}return(false)}function accumulateDateTimeElems(b,a,c){if(isDatePartElem(b)){a[b.name]=b}}function validateDateTimeElems(e,k,h){var l=new Array();for(var j in e){if(typeof(e[j])=="object"){var d=e[j];var b=j.substring(0,j.lastIndexOf("."));if(l[b]){continue}var c=""+getElementValue(d,k);if(trim(c)==""){continue}l[b]=true;for(var g=0;g<DATE_TIME_PARTS.length;g++){var a=b+"."+DATE_TIME_PARTS[g];if(a!=j){var f=e[a];if(f){c=""+getElementValue(f,k);if(trim(c)==""){return alertComp(f,getMsg(k,"ValidationMessage"),k,h)}}}}}}return(true)};